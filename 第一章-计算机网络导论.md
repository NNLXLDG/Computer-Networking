# 第一章 计算机网络导论

## 1.1 互联网概述

### 1.1.1 互联网的组成要素

- 基础设施视角：
  - 数十亿互联的计算设备（主机/端系统）
  - 通信链路（光纤、铜缆、无线电、卫星）
  - 分组交换设备（路由器和交换机）
  - 由多个组织管理的网络集合

### 1.1.2 服务视角

- 为应用层服务提供基础设施：
  - Web、流媒体、视频会议、电子商务等
  - 提供分布式应用的编程接口（API）

### 1.1.3 互联网协议

- 定义：
  - 控制消息收发规则的集合
  - 规定消息格式、顺序和响应动作
- 常见协议示例：
  - HTTP, TCP, IP, WiFi, 4G/5G, Ethernet
- 标准化组织：
  - IETF（互联网工程任务组）
  - RFC（请求评论）文档体系

## 1.2 网络边缘

### 1.2.1 接入网络类型

- 住宅接入：
  - DSL（数字用户线）：利用电话线，24-52Mbps下行
  - HFC（混合光纤同轴）：40Mbps-1.2Gbps下行
- 企业接入：
  - 以太网（100Mbps-10Gbps）
  - WiFi（802.11标准）
- 移动接入：
  - 蜂窝网络（4G/5G）
  - WiFi热点

### 1.2.2 物理介质

- 有线介质：
  - 双绞线（Cat5/Cat6）
  - 同轴电缆
  - 光纤（10-100Gbps）
- 无线介质：
  - 无线电频谱（2.4GHz/5GHz）
  - 微波传输
  - 卫星通信

## 1.3 网络核心

### 1.3.1 分组交换

- 工作原理：
  - 存储转发机制
  - 统计复用共享带宽
- 关键参数：
  - 传输延迟 = 数据包大小/链路速率（L/R）
  - 排队与丢包现象

### 1.3.2 电路交换

- 特点：
  - 专用端到端连接
  - 频分复用（FDM）和时分复用（TDM）
  - 资源独占，无带宽竞争

### 1.3.3 交换技术对比

| 特性        | 分组交换          | 电路交换        |
|-----------|---------------|-------------|
| 资源分配      | 动态共享         | 静态预留       |
| 适合流量类型    | 突发数据         | 恒定流量       |
| 带宽利用率     | 高             | 低           |
| 服务质量保证    | 无             | 有           |

## 1.4 互联网结构

### 1.4.1 分层架构

1. 接入层：终端用户网络（家庭/企业）
2. 区域ISP：本地服务提供商
3. 国家ISP：骨干网络运营商
4. 内容提供商网络（Google等自建网络）

### 1.4.2 互联机制

- IXP（互联网交换中心）：
  - 实现不同ISP之间的对等互联
- 对等连接协议：
  - 商业协议规范网络互连

## 1.5 网络性能

### 1.5.1 关键指标

- 延迟组成：
  - 传输延迟
  - 传播延迟
  - 处理延迟
  - 排队延迟
- 吞吐量：
  - 瓶颈链路决定端到端吞吐量
- 丢包率：
  - 缓冲区溢出导致数据丢失

### 1.5.2 数据包延迟类型

- **处理延迟**（<1μs）：
  - 错误检查
  - 路由决策
- **排队延迟**：
  - 取决于路由器拥塞程度
  - 流量强度=La/R（a:到达率，L:包长，R:链路速率）
    - La/R→1时延迟显著增大
    - La/R>1时出现无限延迟（理论模型）
- **传输延迟**：
  - 计算公式：d<sub>trans</sub> = L/R
  - L: 数据包长度(bit)，R: 链路速率(bps)
- **传播延迟**：
  - 计算公式：d<sub>prop</sub> = d/s
  - d: 物理距离，s: 传播速度(≈2×10<sup>8</sup>m/s)

### 1.5.3 延迟类比模型

- **车队过收费站模型**：
  - 收费站服务时间对应传输延迟
  - 公路行驶时间对应传播延迟
  - 关键启示：传输延迟与数据包长度正相关，传播延迟与物理距离正相关

### 1.5.4 真实网络延迟测量

- **Traceroute工具**：
  - 通过TTL递增探测路径
  - 显示路径中每个节点的三次RTT值
  - 示例结果分析：
    ```bash
    8  62.40.103.253  104ms  # 跨洋链路延迟突增
    19 fantasia.eurecom.fr 132ms  # 端到端总延迟
    ```

## 1.6 网络安全基础

### 1.6.1 主要攻击类型

| 攻击类型        | 原理描述                     | 防御措施                 |
|---------------|--------------------------|----------------------|
| 数据包嗅探        | 利用共享介质截取明文数据            | 加密传输（HTTPS, VPN）      |
| IP地址欺骗       | 伪造源地址发起攻击               | 入口过滤（RFC 2827）        |
| DDoS攻击       | 僵尸网络淹没目标资源              | 流量清洗、黑洞路由            |
| 中间人攻击        | 劫持会话窃取信息                | 数字证书认证、双向认证           |

### 1.6.2 安全防御体系

1. **认证机制**：
   - SIM卡物理认证（蜂窝网络）
   - 数字证书（TLS/SSL）
2. **加密传输**：
   - 对称加密（AES）
   - 非对称加密（RSA）
3. **完整性保护**：
   - HMAC哈希校验
   - 数字签名（ECDSA）
4. **访问控制**：
   - 防火墙状态检测
   - ACL访问控制列表

## 1.7 协议分层模型

- 各层独立发展
- 下层为上层提供服务
- 协议栈实例：
  - TCP/IP五层模型（物理层→应用层）

### 1.7.1 TCP/IP五层模型

| 层级       | 协议示例                  | 数据单元     | 关键功能               |
|----------|-----------------------|----------|--------------------|
| 应用层      | HTTP, DNS, SMTP       | 消息/报文    | 实现具体应用服务           |
| 传输层      | TCP, UDP              | 段        | 端到端通信质量控制          |
| 网络层      | IP, ICMP              | 数据报      | 路由选择与逻辑寻址          |
| 数据链路层    | Ethernet, 802.11      | 帧        | 介质访问控制与物理地址        |
| 物理层      | RJ45, 无线电频谱          | 比特流      | 信号编码与物理传输          |

### 1.7.2 封装过程图解

1. **应用层**：原始数据（如HTTP请求）
2. **传输层**：添加TCP头 → 段（源/目的端口，序列号）
3. **网络层**：添加IP头 → 数据报（源/目的IP，TTL）
4. **链路层**：添加以太网头 → 帧（MAC地址，FCS校验）
5. **物理层**：转换为电信号/光信号

```
[HTTP数据]
↓ +TCP头 → [TCP段]
↓ +IP头  → [IP数据报] 
↓ +以太网头 → [以太网帧]
↓ 比特流传输
```

## 1.8 互联网发展简史

### 1.8.1 关键发展阶段

- **1969**：ARPANET诞生（4节点）
- **1974**：TCP/IP架构提出（Cerf & Kahn）
- **1983**：TCP/IP成为标准协议
- **1991**：WWW正式发布（Tim Berners-Lee）
- **1994**：Netscape浏览器推动Web普及
- **2005+**：移动互联网时代（4G/5G, 智能手机）
- **2010+**：云计算与SDN革命

### 1.8.2 重要技术里程碑

- **1988**：TCP拥塞控制算法
- **1998**：Google搜索引擎诞生
- **2004**：Facebook开启社交网络时代
- **2006**：AWS推出云计算服务
- **2007**：iPhone重新定义移动互联网
- **2012**：软件定义网络（SDN）商用化

## 附录：重点概念对比

### 延迟类型对比

| 延迟类型   | 影响因素               | 典型值范围        |
|--------|--------------------|--------------|
| 传输延迟 | 数据包大小、链路带宽       | 1μs-100ms    |
| 传播延迟 | 物理距离、介质传播速度      | 1ms-300ms    |
| 处理延迟 | 路由器处理能力          | <1μs         |
| 排队延迟 | 流量强度、缓冲区大小       | 0-数秒        |

### 安全攻击对比

| 攻击类型 | 攻击层级    | 检测难度 | 危害程度 |
|------|---------|------|------|
| 嗅探   | 链路层     | 高    | 中    |
| DDoS | 网络层     | 中    | 高    |
| XSS  | 应用层     | 低    | 高    |
| MITM | 传输层     | 高    | 极高   |
